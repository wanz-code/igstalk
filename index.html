<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Stalker</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      background: linear-gradient(135deg, #f58529, #dd2a7b, #8134af, #515bd4);
      min-height: 100vh;
      font-family: 'Inter', sans-serif;
    }
    .card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      padding: 1.5rem;
    }
    .insta-logo {
      width: 40px;
      margin-right: 10px;
    }
    .gradient-text {
      background: linear-gradient(45deg, #f58529, #dd2a7b, #8134af, #515bd4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  </style>
</head>

<body class="flex flex-col items-center p-6">

  <!-- Header -->
  <div class="flex items-center mb-6">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" class="insta-logo" alt="Instagram">
    <h1 class="text-3xl font-bold gradient-text">Instagram Stalker</h1>
  </div>

  <!-- Input Card -->
  <div class="card w-full max-w-xl mb-6 text-center">
    <input id="usernameInput" type="text" placeholder="Masukkan Username IG (tanpa @)" 
      class="w-full border p-3 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-pink-400">
    <button onclick="stalkUser()" 
      class="w-full bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white font-bold py-3 rounded-lg hover:opacity-90 transition">
      🔍 Cari Akun
    </button>
  </div>

  <!-- Result -->
  <div id="result" class="w-full max-w-2xl"></div>

  <script>
    async function stalkUser() {
      const username = document.getElementById("usernameInput").value.trim();
      if (!username) {
        Swal.fire("⚠️ Oops", "Masukkan username terlebih dahulu!", "warning");
        return;
      }

      Swal.fire({
        title: "Sedang mencari...",
        text: "Tunggu sebentar ya",
        allowOutsideClick: false,
        didOpen: () => Swal.showLoading()
      });

      try {
        const res = await fetch(`https://fastrestapis.fasturl.cloud/stalk/instagram?username=${username}`);
        const data = await res.json();

        Swal.close();

        if (data.status !== 200) {
          Swal.fire("❌ Gagal", "Username tidak ditemukan!", "error");
          return;
        }

        const user = data.result;
        document.getElementById("result").innerHTML = `
          <div class="card mb-6">
            <h2 class="text-2xl font-bold gradient-text mb-2">@${user.name}</h2>
            <p class="text-gray-700 mb-4 whitespace-pre-line">${user.description || '-'}</p>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
              <div>
                <p class="font-bold text-lg">${user.followers}</p>
                <p class="text-gray-500">Followers</p>
              </div>
              <div>
                <p class="font-bold text-lg">${user.uploads}</p>
                <p class="text-gray-500">Posts</p>
              </div>
              <div>
                <p class="font-bold text-lg">${user.engagementRate}</p>
                <p class="text-gray-500">Engagement</p>
              </div>
            </div>
          </div>

          <div class="card mb-6">
            <h3 class="text-xl font-semibold mb-3">📊 Statistik</h3>
            <ul class="text-gray-700 space-y-1">
              <li><b>Aktivitas Rata-rata:</b> ${user.averageActivity}</li>
              <li><b>Post / Hari:</b> ${user.postsPerDay}</li>
              <li><b>Post / Minggu:</b> ${user.postsPerWeek}</li>
              <li><b>Post / Bulan:</b> ${user.postsPerMonth}</li>
              <li><b>Jumlah Post:</b> ${user.amountOfPosts}</li>
              <li><b>Waktu Populer:</b> ${user.mostPopularPostTime}</li>
            </ul>
          </div>

          <div class="card mb-6">
            <h3 class="text-xl font-semibold mb-3">🏷️ Hashtags</h3>
            <div class="flex flex-wrap gap-2">
              ${(user.hashtags || []).map(tag => 
                `<span class="px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full text-sm">${tag}</span>`
              ).join('')}
            </div>
          </div>

          <div class="card mb-6">
            <h3 class="text-xl font-semibold mb-3">🔥 Postingan Paling Disukai</h3>
            ${(user.mostLikedPosts || []).map(post => `
              <div class="mb-3 p-3 border rounded-lg">
                <p>❤️ Likes: ${post.likes} | 💬 Komentar: ${post.comments}</p>
                <a href="${post.link}" target="_blank" 
                  class="text-indigo-600 underline">Lihat Postingan</a>
              </div>
            `).join('')}
          </div>

          <div class="card mb-6">
            <h3 class="text-xl font-semibold mb-3">💬 Postingan Paling Banyak Komentar</h3>
            ${(user.mostCommentedPosts || []).map(post => `
              <div class="mb-3 p-3 border rounded-lg">
                <p>❤️ Likes: ${post.likes} | 💬 Komentar: ${post.comments}</p>
                <a href="${post.link}" target="_blank" 
                  class="text-indigo-600 underline">Lihat Postingan</a>
              </div>
            `).join('')}
          </div>
        `;
      } catch (err) {
        Swal.close();
        Swal.fire("⚠️ Error", "Terjadi kesalahan koneksi!", "error");
      }
    }
  </script>

</body>
</html>